    <ui:composition
         xmlns:ui="http://java.sun.com/jsf/facelets"
         xmlns:f="http://java.sun.com/jsf/core"
         xmlns:h="http://java.sun.com/jsf/html"
         template="../resources/teacherTemplate.xhtml"
         xmlns:est="http://java.sun.com/jsf/composite/components/estimation">
        <ui:define name="content">
         <f:metadata>
             <f:viewParam name="s" value="#{teachersGroups.semester}"/>
             <f:viewParam name="s" value="#{groupControlWorksForTeacher.semester}"/>
             <f:viewParam name="g" value="#{groupControlWorksForTeacher.id}"/>
             <f:viewParam name="c" value="#{groupControlWorksForTeacher.curriculumId}"/>
         </f:metadata>
         <est:header bean="#{groupControlWorksForTeacher}"/>
         <h:form id="form" rendered="#{not groupControlWorksForTeacher.accessDenied}">
           <h:dataTable rendered="#{not groupControlWorksForTeacher.accessDenied}" id="table" value="#{groupControlWorksForTeacher.groupControlWorks}" var="w">
            <h:column>
                <f:facet name="header">
                 <h:outputText value="студент" />
                </f:facet>
                <h:outputLink value="student.xhtml?id=#{w.key.id}&amp;s=#{groupControlWorksForTeacher.semester}"><h:outputText value="#{w.key.fio}"/></h:outputLink>
            </h:column>

            <h:column>
                <f:facet name="header">
                    <h:outputText value="попытки" />
                </f:facet>

                <h:dataTable  id="attempts" value="#{w.value.cwAttempt}" var="a">
                    <h:column>
                        <h:outputLink rendered="#{a.filePath ne 'empty'}" value="#{a.filePath}" id="log">
                            <f:ajax  event="mousedown" listener="#{groupControlWorksForTeacher.logWorkDownload}"/>
                            <f:attribute name="attempt" value="#{a}"/>
                            <h:outputText value="#{a.attemptDate}"/>
                        </h:outputLink>
                        
                        <h:outputText rendered="#{a.filePath eq 'empty'}" value="#{a.attemptDate}"/>
                    </h:column>
                </h:dataTable>
            </h:column>

            <h:column>
                <f:facet name="header">
                 <h:outputText value="в рукописной" />
                </f:facet>
                <h:commandLink id="handle">
                    <f:ajax execute="@this" event="click" render="attempts" listener="#{groupControlWorksForTeacher.saveEmpty}"/>
                    <f:attribute name="work" value="#{w.value}"/>
                    <h:outputText value="отметить"/>
                </h:commandLink>
            </h:column>

            <h:column>
                <f:facet name="header">
                 <h:outputText value="баллы" />
                </f:facet>
             <h:inputText id="points" size="3" maxlength="3" value="#{w.value.points}"/>
            </h:column>

            <h:column>
                <f:facet name="header">
                 <h:outputText value="оценка" />
                </f:facet>
               <h:selectOneMenu id="progress" value="#{w.value.progress}">
                   <f:selectItems value="#{groupControlWorksForTeacher.values}" />
               </h:selectOneMenu>
            </h:column>
           </h:dataTable>

              <h:commandButton id="btn" value="ОКЭ">
                  <f:ajax execute="@form" event="click" render="table:points table:progress error saved" listener="#{groupControlWorksForTeacher.save}"/>
             </h:commandButton>

             <h:outputText id="error" rendered="#{groupControlWorksForTeacher.error}" value="ERROR"/>
             <h:outputText id="saved" rendered="#{groupControlWorksForTeacher.saved}" value="saved"/>
                 <br/>
          </h:form>
        </ui:define>
    </ui:composition>