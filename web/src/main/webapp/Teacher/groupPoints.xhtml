<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    template="../resources/teacherTemplate.xhtml"
    xmlns:est="http://java.sun.com/jsf/composite/components/estimation"
     xmlns:tabs="http://java.sun.com/jsf/composite/components/tabs">

    <ui:define name="contentHeader">
        #{msgs.teacher_groupInfo}
    </ui:define>

    <ui:define name="content">
        <div class="interfaceContent StudentMainPageTitlesBorders">
            <div class="mainStudentPageTitles  mainStudentPageTitlesGreen">
                <p class="mainStudentPageTitles Ipsilon_Web_GreenText">
                    Информация о группе <h:outputText value="#{groupPoints.group.name}"/> (<h:outputText value="#{groupPoints.group.speciality.name}" />)
                </p>
                <div class="backLink greyLinks massSending">
                    <a href="messages_write.xhtml?gr=#{groupPoints.id}">Массовая рассылка</a>
                </div>
                <div class="floatDestroyer"></div>
            </div>
            <f:metadata>
                <f:viewParam name="s" value="#{teachersGroups.semester}"/>
                <f:viewParam name="s" value="#{groupPoints.semester}"/>
                <f:viewParam name="g" value="#{groupPoints.id}"/>
                <f:viewParam name="c" value="#{groupPoints.curriculumId}"/>
            </f:metadata>
            <div class="groupInfo">
                <est:header bean="#{groupPoints}" pageName="points"/>
            </div>
            <h:form rendered="#{not groupPoints.accessDenied}" id="form" prependId="false" style="margin: 10px; margin-top: 0;">
                <h:dataTable styleClass="studentStandatrTable"
                             columnClasses="studentStandatrTableTd studentStandatrTableTdPaddingTeacher,
                             studentStandatrTableTd studentStandatrTableExamin studentStandatrTableTdPaddingTeacher,
                             studentStandatrTableTd studentStandatrTableExamin studentStandatrTableTdPaddingTeacher,
                             studentStandatrTableTd studentStandatrTableExamin studentStandatrTableTdPaddingTeacher,
                             studentStandatrTableTd studentStandatrTableExamin studentStandatrTableTdPaddingTeacher,
                             studentStandatrTableTd studentStandatrTableExamin studentStandatrTableTdPaddingTeacher,
                             studentStandatrTableTd studentStandatrTableExamin studentStandatrTableTdPaddingTeacher,
                             studentStandatrTableTd studentStandatrTableExamin studentStandatrTableTdPaddingTeacher,
                             studentStandatrTableTdLastTd studentStandatrTableExamin studentStandatrTableTdWidthTeacher studentStandatrTableTdPaddingTeacher" cellpadding="0" cellspacing="0" id="table" value="#{groupPoints.points}" var="p" style="margin: 0;">
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="#{msgs.student_Student}" />
                        </f:facet>
                        <span class="linkToStudentsProfile"><h:outputLink value="student.xhtml?id=#{p.points.student.id}&amp;s=#{groupPoints.semester}">#{p.points.student.initials}</h:outputLink></span>
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <!--                            <h:graphicImage value='../resources/images/resultTestsTable.png'/>-->
                            <h:outputText value="Тесты" />
                        </f:facet>
                        <span>#{p.test}</span> <span style="color:#808080;">(#{p.testsMaxPoints})</span>
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <!--                            <h:graphicImage value='../resources/images/reexTable.png'/>-->
                            <h:outputText value="Переэкз." />
                        </f:facet>
                        <span>#{p.reTest}</span>
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <!--                            <h:graphicImage value='../resources/images/resultTestsTable.png'/>-->
                            <span class="Ipsilon_Web_GreenText">Итоговые <br/>тесты</span>
                        </f:facet>
                        <span> #{p.concludingTest}</span> <span style="color:#808080;">(#{p.concludingTestsMaxPoints})</span>
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <!--                            <h:graphicImage value='../resources/images/resultTestExam.png'/>-->
                            <span class="Ipsilon_Web_GreenText">Переэкз.<br/>итоговых<br/>тестов
                            </span>
                        </f:facet>
                        <span>#{p.concludingReTest}</span>
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <!--                            <h:graphicImage value='../resources/images/contrMarksTable.png'/>-->
                            <span class="Ipsilon_Web_GreenText">#{msgs.teacher_control_works},<br/> баллы
                            </span>
                        </f:facet>
                        <span>#{p.controlWorkPoints}</span>
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <!--                            <h:graphicImage value='../resources/images/contrWorksTable.png'/>-->
                            <span class="Ipsilon_Web_GreenText">#{msgs.teacher_control_works},<br/> оценка
                            </span>
                        </f:facet>
                        <span><h:outputText converter="enumConverter" value="#{p.controlWorkValue}" /></span>
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <!--                            <h:graphicImage value='../resources/images/summTable.png'/>-->
                            <h:outputText value="Сумма" />
                        </f:facet>
                        <span>#{p.points.sum}</span>
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <!--                            <h:graphicImage value='../resources/images/resultTable.png'/>-->
                            <h:outputText value="Результат" />
                        </f:facet>
                        <h:selectOneMenu id="grade" value="#{p.grade}">
                            <f:selectItems value="#{groupPoints.enum}" />
                        </h:selectOneMenu>
                    </h:column>
                </h:dataTable>

                <div style="text-align: right; padding: 5px; ">
                    <h:commandButton id="btn" value="#{msgs.teacher_saveButton}" styleClass="studentButton">
                        <f:ajax execute="@form" render="@form" listener="#{groupPoints.save}"/>
                    </h:commandButton>
                </div>
                <h:outputText id="error" rendered="#{groupPoints.error}" value="#{msgs.teacher_errorMessage}"/>
                <h:outputText id="saved" rendered="#{groupPoints.saved}" value="#{msgs.teacher_successSavingMessage}"/>
            </h:form>
        </div>
        <div class="StudentMainPageTitlesBorders">
            <div class="interfaceContentForMyMarks">
                <div class="mainStudentPageTitles  mainStudentPageTitlesSkyBlue">
                    Подсказка
                </div>
            </div>
            <div class="textForPodskazka">
                <tabs:singleTab alias="TEACHER_GROUP_MARKS"/>
            </div>
        </div>
    </ui:define>
</ui:composition>
