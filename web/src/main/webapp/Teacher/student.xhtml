<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:r="http://java.sun.com/jsp/jstl/core"
    template="../resources/teacherTemplate.xhtml"
    xmlns:est="http://java.sun.com/jsf/composite/components/estimation">

    <ui:define name="content">
        <div class="interfaceContent">
            <f:metadata>
                <f:viewParam name="s" value="#{studentResults.semester}"/>
                <f:viewParam name="id" value="#{studentResults.studentId}"/>
            </f:metadata>
            <h:dataTable styleClass="studentStandatrTable"
                         columnClasses="studentStandatrTableTd,studentStandatrTableSubtableTd" cellpadding="0" cellspacing="0" value="#{studentResults.disciplines}" var="d">
                <h:column>
                    <f:facet name="header">
                        Дисциплина
                    </f:facet>
                    #{d.discipline.name}
                </h:column>
                <h:column>
                    <r:set target="#{studentResults}" value="#{d.id}" property="id"/>
                    кр
                    <h:dataTable style="width: 100%;" cellpadding="0" cellspacing="0"  value="#{studentResults.controlWorks}" var="w">
                        <h:column>
                            #{w.points}| #{w.progress}<br/>
                            <h:dataTable value="#{w.cwAttempt}" var="a">
                                <h:column>
                                    <est:readCwAttempt attempt="#{a}"/>
                                </h:column>
                            </h:dataTable>
                        </h:column>
                    </h:dataTable>
                    тесты
                    <h:dataTable
                         columnClasses="studentStandatrTableTd,studentStandatrTableTd, studentStandatrTableSubtableTd,studentStandatrTableTd,
                         studentStandatrTableTdLastTd" cellpadding="0" cellspacing="0"  value="#{studentResults.results}" var="r">
                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="Название" />
                            </f:facet>
                            #{r.work.title} #{r.work.id}
                        </h:column>
                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="Попыток" />
                            </f:facet>
                            с #{r.estimateAttemptsUsedNumber} из #{r.work.estimateAttemptsNumber}<br/>
                            п: #{r.reExameAttemptsUsedNumber} из #{(r.work.type eq 'concluding')?groupTestResults.concludingAttemtpsCount:groupTestResults.regularAttemtpsCount}
                        </h:column>
                        <h:column>
                            <h:dataTable
                                 headerClass="studentTabInStandartTableTh"
                                 columnClasses="studentTabInStandartTableLeftTd, studentTabInStandartTableRightTd"
                                 styleClass="studentTabInStandartTable"  cellpadding="0" cellspacing="0" value="#{r.results}" var="a" id="rowId">
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Правильных ответов" />
                                    </f:facet>
                                    #{a.rightAnswers} #{msgs.student_fromWord} #{r.work.quantity}
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Дата" />
                                    </f:facet>
                                    #{a.date}
                                </h:column>
                            </h:dataTable>
                        </h:column>
                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="Результат" />
                            </f:facet>
                            #{r.pointsForWork}
                        </h:column>
                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="Способ оценивания" />
                            </f:facet>
                            #{r.work.estimation}
                        </h:column>
                    </h:dataTable></h:column>
                <hr/>
            </h:dataTable>
        </div>
    </ui:define>

</ui:composition>