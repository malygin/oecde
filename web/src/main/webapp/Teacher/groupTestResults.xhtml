<ui:composition
 xmlns:ui="http://java.sun.com/jsf/facelets"
 xmlns:f="http://java.sun.com/jsf/core"
 xmlns:h="http://java.sun.com/jsf/html"
 template="../resources/teacherTemplate.xhtml"
 xmlns:est="http://java.sun.com/jsf/composite/components/estimation">
<ui:define name="content">
 <f:metadata>
     <f:viewParam name="s" value="#{teachersGroups.semester}"/>
     <f:viewParam name="s" value="#{groupTestResults.semester}"/>
     <f:viewParam name="g" value="#{groupTestResults.id}"/>
     <f:viewParam name="c" value="#{groupTestResults.curriculumId}"/>
 </f:metadata>
 <est:header bean="#{groupTestResults}"/>
 <h:dataTable rendered="#{not groupTestResults.accessDenied}" value="#{groupTestResults.groupTestResults}" var="w">
       <h:column>
        <f:facet name="header">
         <h:outputText value="#{msgs.student_Student}" />
        </f:facet>
           <h:outputLink value="student.xhtml?id=#{w.key.id}&amp;s=#{groupTestResults.semester}">#{w.key.fio}</h:outputLink>
       </h:column>
     <h:column>
      <f:facet name="header">
       <h:outputText value="#{msgs.teacher_results}" />
      </f:facet>
         <h:dataTable value="#{w.value}" var="r">
             <h:column>
                <f:facet name="header">
                 <h:outputText value="#{msgs.student_testResultName}" />
                </f:facet>
               #{r.work.title} #{r.work.id}
               </h:column>
               <h:column>
                <f:facet name="header">
                 <h:outputText value="#{msgs.student_testResultAttempt}" />
                </f:facet>
               #{msgs.user_from} #{r.estimateAttemptsUsedNumber} #{msgs.student_fromWord} #{r.work.estimateAttemptsNumber}<br/>
               Ð¿: #{r.reExameAttemptsUsedNumber} #{msgs.student_fromWord} #{(r.work.type eq 'concluding')?groupTestResults.concludingAttemtpsCount:groupTestResults.regularAttemtpsCount}
               </h:column>

               <h:column>
                   <h:dataTable value="#{r.results}" var="a" id="rowId">
                       <h:column>
                            <f:facet name="header">
                             <h:outputText value="#{msgs.student_testResultCorrectAnswers}" />
                            </f:facet>
                           #{a.rightAnswers} #{msgs.student_fromWord} #{r.work.quantity}
                       </h:column>
                       <h:column>
                            <f:facet name="header">
                             <h:outputText value="#{msgs.student_testResultDate}" />
                            </f:facet>
                           #{a.date}
                       </h:column>
                   </h:dataTable>
               </h:column>

               <h:column>
                <f:facet name="header">
                 <h:outputText value="#{msgs.student_testResultResult}" />
                </f:facet>
                   #{r.pointsForWork}
               </h:column>
               <h:column>
                <f:facet name="header">
                 <h:outputText value="#{msgs.teacher_wayOfEvaluation}" />
                </f:facet>
                   <h:outputText converter="enumConverter" value="#{r.work.estimation}" />
               </h:column>
         </h:dataTable>
     </h:column>
 </h:dataTable>
</ui:define>
</ui:composition>