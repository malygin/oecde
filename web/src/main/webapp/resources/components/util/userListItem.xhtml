<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:composite="http://java.sun.com/jsf/composite"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ut="http://java.sun.com/jsf/composite/components/util"
      xmlns:sec="http://www.springframework.org/security/facelets/tags"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      >


 <!-- INTERFACE -->
  <composite:interface>
      <composite:attribute name="type" required="true" type="java.lang.String" shortDescription="тип пользователя"/>
      <composite:attribute name="u" required="true" type="org.sgu.oecde.core.users.AbstractUser" shortDescription="пользователь"/>
      
  </composite:interface>

  <!-- IMPLEMENTATION -->
   <composite:implementation>
       <style type="text/css">
       </style>
       <div style="float: left; margin-right: 20px; text-align: center;">
           <ut:showPhoto user="#{cc.attrs.u}" styleClass="#{cc.attrs.u.classType}" size="medium"/>
           <div class="floatDestroyer"/>
           <h:outputText rendered="#{cc.attrs.u.online}" value="On-line" styleClass="online"/>
       </div>
       <div>
        
       </div>
        <div style="padding-top: 5px;" class="Search">
            <table style="height:100%; text-indent: 0px;">
                <tr>
                    <td class="userInfoItemColor" style="width: 14%;">
                        #{msgs.student_studentListFIO}
                    </td>
                    <td>
                        <span class="linkTo#{cc.attrs.u.classType}sProfile">
                            <a href="#{cc.attrs.type}.xhtml?id=#{cc.attrs.u.id}">
                                #{cc.attrs.u.fio}
                            </a>
                        </span>
                    </td>
                </tr>
                <h:panelGroup rendered="#{cc.attrs.type eq 'student'}">
                    <tr><td class="userInfoItemColor">#{msgs.teacher_city}:</td><td>#{cc.attrs.u.city.name}</td></tr>
                    <sec:ifAnyGranted roles="ROLE_ADMIN">
                    <tr><td class="userInfoItemColor">#{msgs.student_mainContentUserInfoSpec}</td><td>#{cc.attrs.u.group.speciality.name}</td></tr>
                    <tr><td class="userInfoItemColor">#{msgs.student_mainContentUserInfoGroup}</td><td><h:outputLink value="group.xhtml?id=#{cc.attrs.u.group.id}">#{cc.attrs.u.group.name}</h:outputLink></td></tr>
                    <tr><td class="userInfoItemColor">#{msgs.student_mainContentUserInfoCourse}</td><td>#{cc.attrs.u.group.year}</td></tr>
                    </sec:ifAnyGranted>
                    <tr>
                        <td class="userInfoItemColor">Контакты:</td>
                        <td>#{cc.attrs.u.contacts}</td>
                    </tr>
                    <tr>
                        <td class="userInfoItemColor">Дополнительная информация:</td>
                        <td>#{cc.attrs.u.info}</td>
                    </tr>
<!--                    <tr><td></td><td><h:outputText rendered="#{cc.attrs.u.online}" value="On-line" style="color:#617F5F;"/></td></tr>-->
                </h:panelGroup>
                <h:panelGroup rendered="#{cc.attrs.type eq 'admin'}">
                    <tr><td class="userInfoItemColor">Должность:</td><td>#{cc.attrs.u.position}</td></tr>
                    <tr><td class="userInfoItemColor">Контакты:</td><td>#{cc.attrs.u.description}</td></tr>
                   
                </h:panelGroup>
                <h:panelGroup rendered="#{cc.attrs.type eq 'teacher'}">
                    <tr>
                        <td class="userInfoItemColor">Департамент:</td>
                        <td>#{cc.attrs.u.department.name}</td>
                    </tr>
                    <tr>
                        <td class="userInfoItemColor">Должность:</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td class="userInfoItemColor">
                            #{msgs.student_gradesTableHeadDisc}:
                        </td>
                        <td class="linkToStudentsProfile" style="font-size: 8pt; font-weight: normal !important;">
                            <h:outputLink value="discipline.xhtml?c= #{t.key.id}">
                            #{t.key['discipline'].name}
                            </h:outputLink>
                        </td>
                    </tr>
                    <tr><td class="userInfoItemColor">Контакты:</td><td></td></tr>
                </h:panelGroup>
            </table>
            <table style="width: 65%;">
                <tr>
                    <td class="greyLinks" style="height: 30px;">
                      <a class="s1" href="messages_write.xhtml?user=${cc.attrs.u.id}">#{msgs.student_studentListWriteMessage}</a>
                    </td>
                    <td class="greyLinks" style="height: 30px;">
                      <span class="s2" ><a href="messages_dialog.xhtml?user=${cc.attrs.u.id}">#{msgs.student_studentLestShowDialog}</a></span>
                    </td>
                    
                    <sec:ifAnyGranted roles="ROLE_ADMIN">
                        <td colspan="2" class="controlWorksDisciplineNameLinkGrey enterPic">
                          <h:outputLink value="switch_user?j_username=#{cc.attrs.u.username}" >#{msgs.user_ComeIn}</h:outputLink>
                       </td>
                   </sec:ifAnyGranted>
                    
                </tr>
            </table>
        </div>
       <div class="floatDestroyer"></div>
   </composite:implementation>
</html>
