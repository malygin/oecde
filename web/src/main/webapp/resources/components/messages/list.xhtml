<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:composite="http://java.sun.com/jsf/composite"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">

 <!-- INTERFACE -->
  <composite:interface>
    <composite:attribute  name="list"/>
  </composite:interface>

  <!-- IMPLEMENTATION -->
    <composite:implementation>         
                <h:dataTable value="#{cc.attrs.list}" var="message">         
                <h:column>
                    <h:form id="formList">
                        <h:outputText value="#{message.fioAuthor}"/>
                        (<h:outputText value="#{message.typeAuthor}"/>)
                        <small><h:outputText value="#{message.message.dateMessage}"/></small><br/>
                        <b><h:outputText rendered="#{message.new}" value="Новое!"/></b>
                        <b><h:outputText rendered="#{message.filesExist}" value="Файлы!"/></b>
                        <a href="messages_read.xhtml?id=#{message.message.id}"><h:outputText value="#{message.message.theme}"/></a><br/>
                        <h:outputText value="#{message.shortText}"/>
                        <h:outputText  value="#{msgs.message_deleteSuccess}" rendered="#{MessageBean.renderDeleteSuccess}"/>
                        <h:commandLink   action="#{MessageBean.deleteMessage}" >
                            <h:outputText rendered="#{not MessageBean.renderDeleteSuccess}" value="#{msgs.message_delete}"/>
                                         <f:setPropertyActionListener target="#{MessageBean.currentMessageId}" value="#{message.message.id}" />
                                         <f:ajax  execute="@this" render="@form" />
                         </h:commandLink><br/>
                         <h:outputLink rendered="#{not MessageBean.renderDeleteSuccess}" value="messages_read.xhtml?id=#{message.message.id}">#{msgs.message_answer}</h:outputLink><br/><br/><br/>
                    </h:form>
                </h:column>      
            </h:dataTable>           
  </composite:implementation>
</html>