<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:composite="http://java.sun.com/jsf/composite"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      >


 <!-- INTERFACE -->
  <composite:interface>     
          <composite:attribute name="tests"  shortDescription="список результатов тестов"/>
          <composite:attribute name="studentId" shortDescription="айдишник студента"/>
          
  </composite:interface>

  <!-- IMPLEMENTATION -->
   <composite:implementation>
      <h:dataTable rendered="#{cc.attrs.tests!=null}" value="#{cc.attrs.tests}" var="r" styleClass="opasityTableTestResult" cellpadding="0" cellspacing="0">
             <h:column>
                <f:facet name="header">
                    <h:outputText value="#{msgs.student_testResultName}" />
                </f:facet>
                 <div class="TestNameDiv">
                     <h:outputText value="#{r.work.title}" />
                 </div>
               </h:column>
               <h:column>
                <f:facet name="header">
                    <div class="DivWidth70"><h:outputText value="#{msgs.student_testResultAttempt}" /></div>
                </f:facet><small>
               сессия: #{r.estimateAttemptsUsedNumber} #{msgs.student_fromWord} #{r.work.estimateAttemptsNumber}<br/>
               пере: #{r.reExameAttemptsUsedNumber} #{msgs.student_fromWord} #{(r.work.type eq 'concluding')?groupTestResults.concludingAttemtpsCount:groupTestResults.regularAttemtpsCount}
                </small>
               </h:column>

               <h:column>
                   
                   <f:facet name="header">
                       <div class="RightAnswerDiv">
                       <h:outputText value="#{msgs.student_testResultCorrectAnswers}"/>
                       </div>
                   </f:facet>
                   <f:facet name="header">
                       <div class="DateAnswerDiv">
                            <h:outputText  value="#{msgs.student_testResultDate}"  />
                       </div>
                   </f:facet>
                   
                   <h:dataTable value="#{r.results}" var="a" id="rowId" styleClass="litleTabContrWorks" cellpadding="0" cellspacing="0">
                      <h:column>
                           <div class="DivWidth70">
                               <h:outputLink value="showStudentTest.xhtml?id=#{cc.attrs.studentId}&amp;s=#{groupTestResults.semester}&amp;test=#{r.work.id}&amp;attempt=#{a.id}&amp;c=#{groupTestResults.curriculumId}">#{a.rightAnswers} #{msgs.student_fromWord} #{r.work.quantity}</h:outputLink>
                           </div>
                       </h:column>
                       <h:column>
                           <div style="width:95px;">
                               <h:outputText  converter="dateConverter" value="#{a.date}" />
                           </div>
                       </h:column>
                  </h:dataTable>
               </h:column>

               <h:column>
                <f:facet name="header">
                 <h:outputText value="#{msgs.student_testResultResult}" />
                </f:facet>
                   <h:outputText styleClass="resultRedText" value="#{r.pointsForWork}" />
               </h:column>
               <h:column>
                <f:facet name="header">
                 <h:outputText value="#{msgs.teacher_wayOfEvaluation}" />
                </f:facet>
                    <h:outputText converter="enumConverter" value="#{r.work.estimation}" />
               </h:column>
         </h:dataTable>
  </composite:implementation>
</html>