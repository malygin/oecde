<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:composite="http://java.sun.com/jsf/composite"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <!-- INTERFACE -->
    <composite:interface>
        <composite:attribute  name="question" shortDescription="передаем вопрос для вывода"/>
    </composite:interface>

    <!-- IMPLEMENTATION -->

    <composite:implementation>
        <div class="testQuestionBlock">  Вопрос № #{testPassingBean.iterQ+1}</div>
        <style type="text/css">
/*            table[id*='selectRadio'] tr td{vertical-align: middle}*/
        </style>
                    <div><h:outputText id="qTitle" title="qTitle" styleClass="qTitle" escape="false" value="#{testPassingBean.questionTitle}" /></div>
                    <h:panelGroup  id="radioType" rendered="#{cc.attrs.question.type=='radio'}" styleClass="educ_umk_text_block">
                             <h:selectOneRadio   converter="testConverter" id="selectRadio"  layout="pageDirection" value="#{testPassingBean.selectedAnswer}" styleClass="testSelectPadding" style="margin-top: 10px;">
                                 <f:selectItems   value="#{testPassingBean.answers}" />
                                 <div class="floatDestroyer"></div>
                            </h:selectOneRadio>

                         </h:panelGroup>

                          <h:panelGroup id="checkType" rendered="#{cc.attrs.question.type=='check'}" styleClass="educ_umk_text_block" style="margin-bottom: 10px;">
                              <h:selectManyCheckbox  converter="testConverter"  layout="pageDirection"  value="#{testPassingBean.selectedAnswers}" styleClass="testSelectPadding">
                                  <f:selectItems   value="#{testPassingBean.answers}" /><br/>
                            </h:selectManyCheckbox >
                             <div class="floatDestroyer"></div>
                         </h:panelGroup>

                          <h:panelGroup id="textType" rendered="#{cc.attrs.question.type=='text'}" styleClass="educ_umk_text_block" style="margin-bottom: 10px; margin-left: 0; text-align: center !important;">
                              <br/> <h:inputText value="#{testPassingBean.selectedAnswerText}"/>
                         </h:panelGroup>
                          <h:panelGroup id="comparisonType" rendered="#{cc.attrs.question.type=='comparison'}">
                              <div  style="margin-top: 10px; margin-bottom: 10px;">
                                  <table style="margin-left: 320px;">
                              <ui:repeat value="#{testPassingBean.answerComparisnView}"  var="a" varStatus="i">
                                 <tr>
                                     <td valign="middle">
                                  #{i.index+1}.
                                     </td>
                                     <td valign="middle" width="80px;">
                                        <h:outputText escape="false" value="#{a.title2}"/>
                                        </td>
                                         <td valign="middle"><h:outputText escape="false" value="#{a.title} "/></td>
                                        <td valign="middle"><h:inputText size="2" styleClass="numberField" onkeyup="
                                              if(isNaN(parseInt(this.value))){this.value='';}
                                              else{ if((this.value>#{testPassingBean.currentQustionView.countAnswers}) || (this.value&lt;1)) this.value=#{testPassingBean.currentQustionView.countAnswers};
                                                     else this.value=parseInt(this.value)}
                                                           "  value="#{a.answer}">
                                              }
                                          </h:inputText>
                                         </td>
                                        </tr>
                              </ui:repeat>
                                  </table>

                              </div>

                         </h:panelGroup>

                         <h:commandButton value="следующий" action="#{testPassingBean.next}" styleClass="studentButton testButtons">
                             <f:ajax render="@form"/>
                         </h:commandButton>

                         <h:commandButton value="ответить" action="#{testPassingBean.answer}" styleClass="studentButton testButtons">
                              <f:ajax execute="@form" render="@form"/>
                         </h:commandButton>

                         <h:commandButton id="completeTest" onclick="removeCounter();" value="завершить тест" action="#{testPassingBean.completeTest}" styleClass="studentButtonRed testButtons">
                             <f:ajax render="@form"/>
                         </h:commandButton>
    </composite:implementation>
</html>
