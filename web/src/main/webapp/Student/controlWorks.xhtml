<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:r="http://java.sun.com/jsp/jstl/core"
    template="../resources/studentTemplate.xhtml"
    >
    <ui:define name="contentHeader">
        #{msgs.student_myCWs}
    </ui:define>
    <ui:define name="content">
        <f:metadata>
            <f:viewParam name="s" value="#{controlWorksBean.semester}"/>
        </f:metadata>
        <div class="interfaceContent">
            <div class="navigationLinks">
                <h:outputLink value="?s=#{controlWorksBean.semester==0?1:0}">${msgs.student_otherSemestr}</h:outputLink><br/>
            </div>
            <r:forEach items="${controlWorksBean.controlWorks}" var="o">
                <div class="studentInterfaceStandartList">
                    <div class="controlWorksControlTitle">
                        <span class="controlWorksDisciplineName">${o[0].discipline.name}</span>
                        <span class="linkToTeachersProfile" style="color:#669999;">(<h:outputLink value="teacher.xhtml?id=${o[3].id}">${o[3].initials}</h:outputLink>)</span>
                        <span class="chatPostDate" style="color: #AFAFAF; font-size: 10pt; margin: 0px;">(${o[1].points} - ${o[1].progress})</span>
                    </div>
                    <br/>
                    <ol style="padding-left: 25px; list-style: none;">
                        <li>
                            <span>${msgs.student_mcwCWNumber} 1</span>
                            <ol style="padding-left: 25px; list-style: none;">
                                <r:forEach items="#{o[1].cwAttempt}" varStatus="i" var="a">
                                    <li class="downLoadFileLink"><span>${i.count}.</span> <a href="../resources/userFiles/controlWorks/${a.filePath}">${a.filePath}</a></li>
                                </r:forEach>
                            </ol>
                        </li>
                    </ol>
                    <br/>
                    <r:if test="${o[2]}">
                        <h:form  enctype="multipart/form-data">
                            <div class="controlWorksFileLoadButtons">
                                <input type="file" name="CwFile"/>
                                <h:commandButton  action="#{controlWorksBean.saveCw}" value="Загрузить">
                                    <f:setPropertyActionListener target="#{controlWorksBean.currentControlWorks}" value="#{o[1]}" />
                                    <f:setPropertyActionListener target="#{controlWorksBean.currentDeCurriculum}" value="#{o[0]}" />
                                </h:commandButton>
                            </div>
                        </h:form>

                    </r:if>
                </div>
            </r:forEach>
        </div>
    </ui:define>
</ui:composition>