<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    template="../resources/studentTemplate.xhtml"
    xmlns:est="http://java.sun.com/jsf/composite/components/estimation">
    >
    <ui:define name="contentHeader">
        #{msgs.student_myCWs}
    </ui:define>
    <ui:define name="content">
        <f:metadata>
            <f:viewParam name="s" value="#{controlWorksBean.semester}"/>
        </f:metadata>
        <div class="interfaceContent">
            <est:changeSemester bean="#{controlWorksBean}"/>
             <h:dataTable width="100%" value="#{controlWorksBean.controlWorks}" var="o">
                 <h:column>
                <div class="studentInterfaceStandartList">
                    <div class="controlWorksControlTitle">
                        <span class="controlWorksDisciplineName">${o[0].discipline.name}</span>
                        <span class="linkToTeachersProfile" style="color:#669999;">(<h:outputLink value="teacher.xhtml?id=${o[3].id}">${o[3].initials}</h:outputLink>)</span>
                        <span class="chatPostDate" style="color: #AFAFAF; font-size: 10pt; margin: 0px;">(${o[1].points} - <h:outputText converter="enumConverter" value="${o[1].progress}"/>)</span>
                    </div>
                    <br/>
                    <ol style="padding-left: 25px; list-style: none;">
                        <li>
                            <ol style="padding-left: 25px; list-style: none;">
                                <h:dataTable value="#{o[1].cwAttempt}" var="a">
                                    <li class="downLoadFileLink"><h:outputText rendered="#{a.filePath eq 'empty'}" value="#{a.attemptDate}"/>
                                    <h:outputLink rendered="#{a.filePath ne 'empty'}" value="#{a.filePath}" id="log">
                                        <h:outputText value="#{a.attemptDate}"/>
                                    </h:outputLink>
                                    </li>
                                </h:dataTable>
                            </ol>
                        </li>
                    </ol>
                    <br/>
                    <h:form rendered="#{o[2]}"  enctype="multipart/form-data">
                        <div class="controlWorksFileLoadButtons">
                            <input type="file" name="CwFile"/>
                            <h:commandButton  action="#{controlWorksBean.saveCw}" value="Загрузить">
                                <f:setPropertyActionListener target="#{controlWorksBean.currentControlWorks}" value="#{o[1]}" />
                                <f:setPropertyActionListener target="#{controlWorksBean.currentDeCurriculum}" value="#{o[0]}" />
                            </h:commandButton>
                        </div>
                    </h:form>
                </div>
     </h:column>
            </h:dataTable>
        </div>
    </ui:define>
</ui:composition>