<?xml version="1.0" encoding="UTF-8"?>
<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    template="../resources/studentTemplate.xhtml"
    xmlns:j="http://java.sun.com/jsf/composite/components/journal"
    xmlns:news="http://java.sun.com/jsf/composite/components/news"
    xmlns:ut="http://java.sun.com/jsf/composite/components/util"
    xmlns:est="http://java.sun.com/jsf/composite/components/estimation"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions">

    <ui:define name="fio">
        <h:outputText value="#{studentSessionBean.student.fio}"/>
    </ui:define>
    <ui:define name="content">
        <style>
            .educ_umk_text {
                margin-bottom: 2px;
                margin-left: 28px;
            }
            .educ_content_title {
                margin-bottom: 5px;
                margin-left: 30px;
                margin-top: 2px;
            }
            .my_educ_text ol {
                margin-left: 0;
            }
            .my_educ_disc_reason{
                list-style: none;
            }
            .my_educ_disc_reason li{
                margin-left: 23px;
            }
            .mainStyle .navigationLinksTitle{
                padding-left: 10px; color: gray; font-size: 12pt !important;
                height: 20px;
            }
            .mainStyle .navigationLinksTitle a:link{color: #8BB5DF; text-decoration: none; font-weight: normal;}
            .mainStyle .navigationLinksTitle a:visited{color: #8BB5DF; text-decoration: none; font-weight: normal;}
            .mainStyle .navigationLinksTitle a:active{color: #8BB5DF; text-decoration: underline; font-weight: normal;}
            .mainStyle .navigationLinksTitle a:hover{color: #8BB5DF; text-decoration: underline; font-weight: normal;}

            .mainStyle .controlWorksDisciplineNameLink a{font-size: 9pt !important;}

            /*повтыкать везде для текста превьюшек*/.previewText{
                font-size: 8pt;
            }
            .mainStyle .changeSemestrBlock div{
                margin: 3px 0px;
                border: 1px solid silver;
                padding: 5px;
            }
            .indexChangeSemestrPanel div{
                border: 1px solid silver;
            }
            .indexChangeSemestrPanel div div{
                background: none !important;
                border: 0px;
            }
            .indexChangeSemestrPanel div div div{
                color: black;
            }
        </style>

        <div class="userFile">
            <div style="width: 9%">
                <ut:showPhoto user="#{studentSessionBean.student}" size="small"/>
            </div>
            <div class="userData" style="width: 91%;">
                <table style="float: left; margin-top: 10px;">
                    <tr>
                        <td><p>#{msgs.student_mainContentUserInfoSpec}</p></td><td><div>#{studentSessionBean.student.group.speciality.name}</div></td>
                    </tr>
                    <tr>
                        <td><p>#{msgs.student_mainContentUserInfoGroup}</p></td><td><div>#{studentSessionBean.student.group.name}</div></td>
                    </tr>
                    <tr>
                        <td><p>Ваш рейтинг:</p></td><td><div style="color: green; font-weight: bolder;">#{studentRatingBean.studentRating.sum}</div></td>
                    </tr>
                </table>
                <table style="float: right; font-size: 13pt; position: relative; top: -10px; right: -10px;">
                    <tr>
                        <td style="padding-right: 10px;"><div>#{studentSessionBean.student.surname}</div></td>
                        <td style="padding-right: 10px;"><div>#{studentSessionBean.student.name}</div></td>
                        <td><div>#{studentSessionBean.student.secondName}</div></td>
                    </tr>
                </table>
                <div class="floatDestroyer"></div>
            </div>
            <div class="floatDestroyer"></div>
        </div>
        <div style="padding: 5px;">
            <table style="width: 100%;">
                <tr>
                    <td colspan="2" style="padding: 3px 3px 10px 3px; border: 1px solid silver;">
                        <div style=" border-bottom: 1px solid silver;">
                            <div class="navigationLinksTitle"><a style="font-size: 12pt;" href="schedule.xhtml">Расписание</a></div>
                        </div>
                        <style type="text/css">
                            .mainStyle .studentStandatrTable *{
                                text-align: left !important;
                            }
                            .sas1{
                                width: 50%;
                            }
                        </style>
                        <h:dataTable columnClasses="
                                     studentStandatrTableTd sas1,
                                     studentStandatrTableTd,
                                     studentStandatrTableTd,
                                     studentStandatrTableTdLastTd"
                                     value="#{studentScheduleBean.schedule}" var="s" styleClass="studentStandatrTable" cellpadding="0" cellspacing="0">
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="дисциплина"/>
                                </f:facet>
                                <span class="controlWorksDisciplineName" style="font-size: 8pt;"><h:outputText value="#{s.discipline.name}"/></span>
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="преподаватель"/>
                                </f:facet>
                                <span class="linkToTeachersProfile"><a href="teacher.xhtml?id=#{s.teacher.id}"><h:outputText value="#{s.teacher.initials}"/></a></span>
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="комната"/>
                                </f:facet>
                                <div style="text-align: center !important;">
                                    <h:outputText value="#{s.room}" style="color: #{s.color}"/>
                                </div>
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="дата"/>
                                </f:facet>
                                <span ><h:outputText value="#{s.lessonDate}"/></span>
                            </h:column>
                        </h:dataTable>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" style="padding: 3px 3px 10px 3px; border: 1px solid silver;">
                        <div style=" border-bottom: 1px solid silver;">
                            <div class="navigationLinksTitle"><a style="font-size: 12pt;" href="schedule.xhtml">Расписание</a></div>
                        </div>
                        <table style="width: 100%;" class="studentStandatrTable" cellpadding="0" cellspacing="0">
                            <tr>
                                <th style="width: 25%;">
                                    Событие
                                </th>
                                <th style="width: 25%;">
                                    Дата
                                </th>
                                <th style="width: 25%;">
                                </th>
                                <th style="width: 25%;">
                                </th>
                            </tr>
                            <tr>
                                <td class="studentStandatrTableTd">
                                    Открытие тестов
                                </td>
                                <td class="studentStandatrTableTd">
                                    #{resourceService.regularTestBeginDate}
                                </td>
                                <td class="studentStandatrTableTd"></td>
                                <td class="studentStandatrTableTdLastTd"></td>
                            </tr>
                            <tr>
                                <td class="studentStandatrTableTd">
                                    Закрытие тестов
                                </td>
                                <td class="studentStandatrTableTd">
                                    #{studentIndexBean.testClosingDate}
                                </td>
                                <td class="studentStandatrTableTd"></td>
                                <td class="studentStandatrTableTdLastTd"></td>
                            </tr>
                            <tr>
                                <td class="studentStandatrTableTd">
                                    Открытие итоговых тестов
                                </td>
                                <td class="studentStandatrTableTd">
                                    #{resourceService.concludingTestBeginDate}
                                </td>
                                <td class="studentStandatrTableTd"></td>
                                <td class="studentStandatrTableTdLastTd"></td>
                            </tr>
                            <tr>
                                <td class="studentStandatrTableTd">
                                    Закрытие итоговых тестов
                                </td>
                                <td class="studentStandatrTableTd">
                                    #{resourceService.concludingTestEndDate}
                                </td>
                                <td class="studentStandatrTableTd"></td>
                                <td class="studentStandatrTableTdLastTd"></td>
                            </tr>
                            <tr>
                                <td class="studentStandatrTableTd">
                                    Открытие контрольных
                                </td>
                                <td class="studentStandatrTableTd">
                                    #{studentIndexBean.getDate("controlWorksBeginDate")}
                                </td>
                                <td class="studentStandatrTableTd"></td>
                                <td class="studentStandatrTableTdLastTd"></td>
                            </tr>
                            <tr>
                                <td class="studentStandatrTableTd">
                                    Открытие контрольных
                                </td>
                                <td class="studentStandatrTableTd">
                                    #{studentIndexBean.getDate("controlWorksEndDate")}
                                </td>
                                <td class="studentStandatrTableTd"></td>
                                <td class="studentStandatrTableTdLastTd"></td>
                            </tr>
                            <tr>
                                <td class="studentStandatrTableTd">
                                    Начало переэкзаменовки
                                </td>
                                <td class="studentStandatrTableTd">
                                    #{resourceService.reExameBeginDate}
                                </td>
                                <td class="studentStandatrTableTd"></td>
                                <td class="studentStandatrTableTdLastTd"></td>
                            </tr>
                            <tr>
                                <td class="studentStandatrTableTd">
                                    Окончание переэкзаменовки
                                </td>
                                <td class="studentStandatrTableTd">
                                    #{resourceService.reExameEndDate}
                                </td>
                                <td class="studentStandatrTableTd"></td>
                                <td class="studentStandatrTableTdLastTd"></td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" style="height: 1px;"></td>
                </tr>
                <tr>
                    <td style=" border: 1px solid silver;" valign="top">
                        <div style=" padding: 0px 5px;max-height: 300px; overflow-y: scroll;">
                            <div style=" border-bottom: 1px solid silver; padding-top: 7px;">
                                <div class="navigationLinksTitle"><a style="font-size: 12pt;" href="news_read.xhtml">Новости</a></div>
                            </div>
                            <div style="padding: 5px;">
                                <h:dataTable value="#{NewsBean.news}" var="new" style="width: 100%;">
                                    <h:column>
                                        <div style=" max-width: 60%; float: left; background: url('../resources/images/newspaper.png') no-repeat left center; padding-left: 18px;">
                                            <span class="controlWorksDisciplineNameLink"><a style="font-size: 9pt;" href="news_list.xhtml?id=#{new.id}">#{new.header}</a></span>
                                        </div>
                                        <span class="chatPostDate"><h:outputText value="#{fn:substring(new.time,0,11)}"/></span>
                                        <div class="floatDestroyer"></div>
                                        <div class="previewText"><h:outputText escape="true" value="#{new.announcement}"/></div>
                                        <br/>
                                    </h:column>
                                </h:dataTable>
                            </div>
                        </div>
                    </td>
                    <td style="width: 50%;padding: 3px 3px 10px 3px;border: 1px solid silver;" valign="top">
                        <div style=" border-bottom: 1px solid silver; padding-top: 4px;">
                            <div class="navigationLinksTitle"><a style="font-size: 12pt;" href="journal.xhtml">Лента событий</a></div>
                        </div>
                        <div style=" padding: 10px; ">
                            <j:eventsOnly  list="#{journalBean.events('studentEvents',studentSessionBean.student)}"/>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" class="indexChangeSemestrPanel">
                        <est:changeSemester semester="#{controlWorksBean.semester}"/>
                    </td>
                </tr>
                <tr>
                    <td style="width: 50%; padding: 3px 3px 0px 3px; border: 1px solid silver;" valign="top">
                        <div style=" border-bottom: 1px solid silver; padding-top: 4px;">
                            <div class="navigationLinksTitle">Дисциплины</div>
                        </div>
                        
                        <div style=" padding: 10px; ">
                        <h:dataTable width="100%" value="#{lowGradedDisciplinesBean.lowGradedDisciplines}" var="p" cellpadding="0" cellspacing="0">
                        <h:column>
                            <div>
                                <div class="controlWorksDisciplineNameLink">
                                    <span style="background: url('../resources/images/pic.jpg') no-repeat left bottom; padding-left: 18px;">
                                        #{p.points.curriculum.discipline.name}
                                    </span>
                                    <span class="linkToTeachersProfile"><h:outputLink value="teacher.xhtml?id=${p.teacher.id}">#{p.teacher.initials}</h:outputLink></span>
                                </div>
                                <div class="educ_content_title_activ">
                                    <ol class="my_educ_disc_reason">
                                        <li>итоговая оценка 
                                        <h:outputText converter="enumConverter" value="#{p.grade}"/>
                                        </li>
                                        <li>сумма баллов #{p.points.sum}</li>

                                    </ol>
                                </div>
                            </div>
                            </h:column>
                        </h:dataTable>
                        </div>
                    </td>
                    <td style="width: 50%; padding: 3px 3px 0px 3px; border: 1px solid silver;" valign="top">
                        <div style=" border-bottom: 1px solid silver; padding-top: 4px;">
                            <div class="navigationLinksTitle"><a style="font-size: 12pt;" href="controlWorks.xhtml">Мои контрольные </a></div>
                        </div>
                        <div style=" padding: 10px; ">
                            <div>
                                <div class="controlWorksDisciplineNameLink">
                                    <span style="background: url('../resources/images/pic.jpg') no-repeat left bottom; padding-left: 18px;">
                                        <a href="1">Английский язык</a>
                                    </span>
                                </div>
                                <div class="educ_content_title_activ">
                                    <ol class="my_educ_disc_reason">
                                        <li>отсутствуют самостоятельные работы</li>
                                        <li>низкая активность</li>
                                    </ol>
                                </div>
                            </div>
                            <div>
                                <div class="controlWorksDisciplineNameLink">
                                    <span style="background: url('../resources/images/pic.jpg') no-repeat left bottom; padding-left: 18px;">
                                        <a href="1">Аудиовизуальные технологии обучения</a>
                                    </span>
                                </div>
                                <div class="educ_content_title_activ">
                                    <ol class="my_educ_disc_reason">
                                        <li>баллов нет</li>
                                    </ol>
                                </div>
                            </div>
                            <div>
                                <div class="controlWorksDisciplineNameLink">
                                    <span style="background: url('../resources/images/pic.jpg') no-repeat left bottom; padding-left: 18px;">
                                        <a href="1">Введение в психолого-педагогическую деятельность</a>
                                    </span>
                                </div>
                                <div class="educ_content_title_activ">
                                    <ol class="my_educ_disc_reason">
                                        <li>баллов нет</li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr><tr>
                    <td style="width: 50%; padding: 3px 3px 0px 3px; border: 1px solid silver;" valign="top">
                        <div style=" border-bottom: 1px solid silver; padding-top: 4px;">
                            <div class="navigationLinksTitle">Результаты тестов</div>
                        </div>
                        <div style=" padding: 10px; ">
                        <h:dataTable cellpadding="0" cellspacing="0"
                                     columnClasses="studentStandatrTableTd,
                                     studentStandatrTableTdLastTd" styleClass="studentStandatrTable"
                                     style="width: 100%;"
                                     value="#{badPassedTestsBean.badPassedTests}" var="r">
                            <h:column>
                            <div>
                                <div class="controlWorksDisciplineNameLink">
                                    <span style="background: url('../resources/images/pic.jpg') no-repeat left bottom; padding-left: 18px;">
                                        #{r.work.title}
                                    </span>
                                </div>
                                <div class="educ_content_title_activ">
                                    <ol class="my_educ_disc_reason">
                                        <li>набрано баллов #{r.pointsForWork}</li>
                                    </ol>
                                </div>
                            </div>
                            </h:column>
                        </h:dataTable>
                            </div>
                    </td>
                    <td style="width: 50%; padding: 3px 3px 0px 3px; border: 1px solid silver;" valign="top">
                        <div style=" border-bottom: 1px solid silver; padding-top: 4px;">
                            <div class="navigationLinksTitle">Результаты итоговых тестов</div>
                        </div>
                        <div style=" padding: 10px; ">
                        <h:dataTable cellpadding="0" cellspacing="0"
                                     columnClasses="studentStandatrTableTd,
                                     studentStandatrTableTdLastTd" styleClass="studentStandatrTable"
                                     style="width: 100%;"
                                     value="#{badPassedTestsBean.badPassedTests}" var="r">
                            <h:column>
                            <div>
                                <div class="controlWorksDisciplineNameLink">
                                    <span style="background: url('../resources/images/pic.jpg') no-repeat left bottom; padding-left: 18px;">
                                        #{r.work.title}
                                    </span>
                                </div>
                                <div class="educ_content_title_activ">
                                    <ol class="my_educ_disc_reason">
                                        <li>набрано баллов #{r.pointsForWork}</li>
                                    </ol>
                                </div>
                            </div>
                            </h:column>
                        </h:dataTable>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
    </ui:define>
</ui:composition>
