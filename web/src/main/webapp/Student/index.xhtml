<?xml version="1.0" encoding="UTF-8"?>
<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    template="../resources/studentTemplate.xhtml"
    xmlns:j="http://java.sun.com/jsf/composite/components/journal"
    xmlns:news="http://java.sun.com/jsf/composite/components/news"
    xmlns:ut="http://java.sun.com/jsf/composite/components/util"
    xmlns:est="http://java.sun.com/jsf/composite/components/estimation"
    xmlns:edu="http://java.sun.com/jsf/composite/components/education"
    >


    <ui:define name="fio">
        <h:outputText value="#{studentSessionBean.student.fio}"/>
    </ui:define>
    <ui:define name="content">
                <div style="height: 150px; background: #0172b8;"><a href="http://mass-decision.ru"><img src="../resources/images/banner.jpg"  /></a></div>

        <!--        <script type="text/javascript">
                    $(document).ready(function(){
                        if (navigator.userAgent.toLowerCase().indexOf('chrome') > -1) {
                            console.debug($(".BorderTd"));
                            $(".BorderTd").attr('style','-o-border-image: url("../resources/images/firstBorder.png") 5 5 5 5 round round;-moz-border-image: url("../resources/images/firstBorder.png") 5 5 5 5 round round; -webkit-border-image: url("../resources/images/firstBorder.png") 5 5 5 5 round round;');
                        }
                    });
                </script>-->
        <f:metadata>
            <f:viewParam name="s" value="#{studentIndexBean.semester}"/>
        </f:metadata>
        <table class="Border" style="width: 100%; margin: auto;" cellpadding="0" cellspacing="20px">
            <tr>
                <td style="width: 57%;  vertical-align: top;" class="BorderTd">
                    <div class="mainStudentPageTitles mainStudentPageTitlesBlue">#{msgs.student_studentInfo}
                    </div>
                    <table class="leftMenuContainer blocksPaddings BorderNone MainInfo">
                        <tr>
                            <td><p>#{msgs.student_mainContentUserInfoSpec}</p></td>
                            <td><p>#{studentSessionBean.student.group.speciality.name}</p></td>
                            <td rowspan="8">
                                <div>
                                    <ut:showPhoto user="#{studentSessionBean.student}" size="medium"/>
                                </div>
                                                        </td>
                                                    </tr>
                        <tr>
                            <td><p>#{msgs.student_mainContentUserInfoGroup}</p></td>
                            <td><p>#{studentSessionBean.student.group.name}</p></td>
                        </tr>
                        <tr>
                            <td><p>#{msgs.student_studentPassId}</p></td>
                            <td><p>#{studentSessionBean.student.studentPassId}</p></td>
                        </tr>
                        <tr>
                            <td><p>#{msgs.student_mainContentUserInfoFaculty}</p></td><td><div>#{studentSessionBean.student.group.faculty}</div></td>
                        </tr>
                        <tr>
                            <td><p>#{msgs.student_yourRating}</p></td>
                            <td class="reitingLink"><a href="studentsList.xhtml" style="">#{studentRatingBean.studentRating.sum} (посмотреть всю группу)</a></td>
                        </tr>
                        <tr>
                            <td><p>#{msgs.student_studentContact}
                                </p>
                            </td>
                            <td><p>#{AbstractPerson.contacts}</p>
                            </td>
                        </tr>
                        <tr>
                            <td><p>#{msgs.student_studentExtraInfo}
                                </p>
                            </td>
                            <td><p>#{AbstractPerson.info}</p>
                            </td>
                        </tr>
                    </table>
                </td>
                <td style="vertical-align: top;" class="BorderTd">
                    <div style="height: 100%;">
                        <edu:calendareInfo/>
                      
                      
                    </div>
                </td>
            </tr>
        </table>
        <div class="floatDestroyer">
        </div>
        <div>
            <table class="Border" cellpadding="0" cellspacing="20px"  style="width: 100%; margin: auto;">
                <tr>
                    <td style="width: 57%; vertical-align: top;" class="BorderTd">

                        <edu:videoConfSchedule bean="#{scheduleBean}" getList="scheduleForStudents" getFullList="scheduleAllForStudents" getCount="countForStudents" numberLessons="20"  renderBlock="firstLessons" />

                </td>
                <td valign="top" class="BorderTd">
                    <div class="BorderNone" style="margin-bottom: 0;">
                        <news:shortList numberNews="3"/>
                    </div>
                </td>
                </tr>
                <tr>
                    <td colspan="2" valign="top" class="BorderTd">
                        <div>
                            <div class="mainStudentPageTitles  mainStudentPageTitlesSkyBlue">
                                <a href="journal.xhtml" style="font-size: 12pt;" >#{msgs.student_studentListOfEvents}</a>
                            </div>
                            <!--                            <div style="height: 200px;">-->
                            <div class="StudentTestsPadding BorderNone">
                                <j:eventsOnly list="#{journalBean.events('studentEvents',studentSessionBean.student, 10)}"/>
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" valign="top" class="BorderTd">
                        <div>
                            <div class="mainStudentPageTitles  mainStudentPageTitlesGreen">
                                <a href="grades.xhtml" style="font-size: 12pt;" >Распределение балов</a>
                            </div>
                            <!--                            <div style="height: 200px;">-->
                            <div class="StudentTestsPadding BorderNone">

                                <h:dataTable styleClass="studentStandatrTable"
                                             columnClasses="studentStandatrTableTd studentStandatrTableTdPaddingTeacher,
                             studentStandatrTableTd studentStandatrTableExamin studentStandatrTableTdPaddingTeacher,
                             studentStandatrTableTd studentStandatrTableExamin studentStandatrTableTdPaddingTeacher,
                             studentStandatrTableTd studentStandatrTableExamin studentStandatrTableTdPaddingTeacher,
                             studentStandatrTableTd studentStandatrTableExamin studentStandatrTableTdPaddingTeacher,
                             studentStandatrTableTd studentStandatrTableExamin studentStandatrTableTdPaddingTeacher,
                             studentStandatrTableTd studentStandatrTableExamin studentStandatrTableTdPaddingTeacher,
                             studentStandatrTableTd studentStandatrTableExamin studentStandatrTableTdPaddingTeacher,
                             studentStandatrTableTd studentStandatrTableExamin studentStandatrTableTdPaddingTeacher,
                             studentStandatrTableTdLastTd studentStandatrTableExamin studentStandatrTableTdWidthTeacher studentStandatrTableTdPaddingTeacher" cellpadding="0" cellspacing="0" id="table" value="#{materialsBean.studentsDisciplines}" var="m" style="margin: 0;">
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Дисциплина" />
                                        </f:facet>
                                       #{m.curriculum.discipline.name}
                                    </h:column>

                                    <h:column>
                                        <f:facet name="header">
                                            <span class="Ipsilon_Web_GreenText">Тестовые<br/>задания</span>
                                        </f:facet>
                                        <span class="lightGreyTestText">#{m.passedTests} * #{m.curriculum.weightTest/100} =</span> <b>#{m.passedTests*m.curriculum.weightTest/100}</b>
                                    </h:column>

                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Самостоятельная аудиторная работа" />
                                        </f:facet>
                                        <h:panelGroup >
                                            #{m.samAudWorkPoints}
                                            <span class="lightGreyTestText">*#{m.curriculum.weightAud/100}= </span><b>#{m.samAudWorkPoints * m.curriculum.weightAud/100}</b>
                                        </h:panelGroup>
                                    </h:column>

                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Самостоятельная внеаудиторная работа" />
                                        </f:facet>
                                        <h:panelGroup >
                                            #{m.samAudOutWorkPoints}
                                            <span class="lightGreyTestText">* #{m.curriculum.weightOutAud/100} =</span><b> #{m.samAudOutWorkPoints * m.curriculum.weightOutAud/100}</b>
                                        </h:panelGroup>

                                    </h:column>

                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Научная и исследовательская деятельность по дисциплине" />
                                        </f:facet>
                                        <h:panelGroup>
                                            #{m.personalCharPoints}
                                            <span class="lightGreyTestText">* #{m.curriculum.weightPers/100} =</span><b> #{m.personalCharPoints * m.curriculum.weightPers/100}</b>

                                        </h:panelGroup>
                                    </h:column>


                                    <h:column>
                                        <f:facet name="header">
                                            <span class="Ipsilon_Web_GreenText">Промежуточная аттестация</span>
                                        </f:facet>
                                        #{m.activityPoints}
                                        <span class="lightGreyTestText">* #{m.curriculum.weightAtt/100} =</span><b> #{m.activityPoints * m.curriculum.weightAtt/100}</b>

                                    </h:column>

                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="#{msgs.student_gradesTableHeadSumm}" />
                                        </f:facet>
                                        <h:panelGroup rendered="#{((p.points.sum) ne null) and ((p.points.sum) ne 0)}">
                                            <h:panelGroup rendered="#{(p.points.sum ge 0) and (p.points.sum le 50)}" styleClass="badResultText">#{p.points.sum}</h:panelGroup>
                                            <h:panelGroup rendered="#{(p.points.sum gt 50) and (p.points.sum le 90)}" styleClass="goodResultText">#{p.points.sum}</h:panelGroup>
                                            <h:panelGroup rendered="#{(p.points.sum gt 90)}" styleClass="greateResultText">#{m.points.sum}</h:panelGroup>
                                            <span class="lightGreyTestText">#{msgs.student_From} 100</span>
                                        </h:panelGroup>
                                    </h:column>

                                </h:dataTable>
                            </div>
                        </div>
                    </td>
                </tr>
<!--                <h:panelGroup rendered="#{studentIndexBean.exame}">
                    <tr>
                        <td colspan="2" class="indexChangeSemestrPanel">
                    <est:changeSemester semester="#{studentIndexBean.semester}"/>
                    </td>
                    </tr>
                    <tr>
                        <td style="width: 50%;" class="StudentSecondLineBlocks" valign="top">
                    <edu:disciplineForStudent/>
                    </td>
                    <td class="tdStudentMainPage" valign="top">
                    <edu:testForStudent/>
                    </td>
                </tr>
                <tr>
                <td class="tdStudentMainPage" valign="top">
            <edu:finalTestsForStudent/>
            </td>

            <td class="tdStudentMainPage" valign="top">
            <edu:controlWorkForStudent/>
            </td>
            </tr>
        </h:panelGroup>-->
            </table>
        </div>
    </ui:define>
</ui:composition>
