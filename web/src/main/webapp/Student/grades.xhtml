<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    template="../resources/studentTemplate.xhtml"
    xmlns:est="http://java.sun.com/jsf/composite/components/estimation">
     <f:metadata>
                <f:viewParam name="s" value="#{gradesBean.semester}"/>
     </f:metadata>
    <ui:define name="contentHeader">
        #{msgs.student_grades}
    </ui:define>
    <ui:define name="content">
        <div class="StudentMainPageTitlesBorders" style="height: 100%;">
        <div class="mainStudentPageTitles  mainStudentPageTitlesGreen">
                    Мои оценки
           
                <div style="float: right;">
                    <est:changeSemester semester="#{gradesBean.semester}" />
                </div>
                <div class="floatDestroyer"/>
            </div>                        
         
            <h:form>
            <table class="MyGradesBigTable">
                <tr>
                    <td><p  class="lightGreyText">Выберите дисциплину:</p></td>
                    <td><p class="lightGreyText">Ваша успеваемость:</p></td>
                </tr>
                <tr>
                    <td>
                        <h:dataTable  value="#{gradesBean.points}" var="p"  cellpadding="0" cellspacing="0" styleClass="TableForGrades">
                            <h:column>
                                <span class="greyLinks">
                                    <h:commandLink   value="#{p.points.curriculum.discipline.name}">
                                         <f:setPropertyActionListener target="#{gradesBean.currentsFacade}" value="#{p}" />
                                         <f:ajax  render="@form"/>
                                   </h:commandLink>
                                </span>
                            </h:column>
                            <h:column>
                                <span><h:outputText converter="enumConverter" value="#{p.grade}"/></span>
                            </h:column>
                        </h:dataTable>
                </td>
                <td>
                <h:panelGroup id="gradeInfo" rendered="#{gradesBean.currentsFacade!=null}" >
                    <p class="GreenLinkToDisciplineOpen"><h:outputLink value="umk.xhtml?c=#{gradesBean.currentsFacade.points.curriculum.id}">#{gradesBean.currentsFacade.points.curriculum.discipline.name}</h:outputLink></p>
                    <table class="GradesDiskription">
                        <tr>
                            <td>Преподаватель:</td>
                            <td>
                                 <ui:repeat value="#{setToList.getList(gradesBean.currentsFacade.points.curriculum.teacherToGroups)}" var="t">    
                                            <a href="teacher.xhtml?id=#{t.teacher.id}"> #{t.teacher.fio}</a>
                                </ui:repeat>                                 
                            </td>
                        </tr>
                        <tr>
                            <td>Тесты:</td>
                            <td> #{gradesBean.currentsFacade.test} <span style="color:#808080;">(#{gradesBean.currentsFacade.testsMaxPoints})</span></td>
                        </tr>
                        <tr>
                            <td>Переэкзаменовка:</td>
                            <td>#{gradesBean.currentsFacade.reTest} </td>
                        </tr>
                        <tr>
                            <td>Итоговые тесты:</td>
                            <td>#{gradesBean.currentsFacade.concludingTest} <span style="color:#808080;">(#{gradesBean.currentsFacade.concludingTestsMaxPoints})</span></td>
                        </tr>
                        <tr>
                            <td>Переэкзаменовка:</td>
                            <td>#{gradesBean.currentsFacade.concludingReTest}</td>
                        </tr>
                        <tr>
                            <td>Самостоятельные работы:</td>
                            <td>#{gradesBean.currentsFacade.controlWorkPoints}</td>
                        </tr>
                        <tr>
                            <td>Контрольная работа:</td>
                            <td><h:outputText converter="enumConverter" value="#{gradesBean.currentsFacade.controlWorkValue}"/></td>
                        </tr>
                        <tr>
                            <td>Сумма:</td>
                            <td>#{gradesBean.currentsFacade.points.sum}</td>
                        </tr>
                        <tr>
                            <td>Итоговая оценка:</td>
                            <td><h:outputText converter="enumConverter" value="#{gradesBean.currentsFacade.grade}"/></td>
                        </tr>
                    </table>
                </h:panelGroup>
                </td>
                </tr>
            </table>
         </h:form>  
            </div>


    </ui:define>
</ui:composition>
