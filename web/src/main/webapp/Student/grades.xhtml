<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    template="../resources/studentTemplate.xhtml"
    xmlns:est="http://java.sun.com/jsf/composite/components/estimation">
     <f:metadata>
                <f:viewParam name="s" value="#{gradesBean.semester}"/>
     </f:metadata>
    <ui:define name="contentHeader">
        #{msgs.student_grades}
    </ui:define>
    <ui:define name="content">
        <div class="StudentMainPageTitlesBorders" style="height: 100%;">
        <div class="mainStudentPageTitles  mainStudentPageTitlesGreen">
                    #{msgs.student_grades}
           
                <div style="float: right;">
                    <est:changeSemester semester="#{gradesBean.semester}" />
                </div>
                <div class="floatDestroyer"/>
            </div>                        
         
            <h:form>
            <table class="MyGradesBigTable">
                <tr>
                    <td><p  class="lightGreyText">#{msgs.student_mcwCWChoseDisc}</p></td>
                    <td><p class="lightGreyText">#{msgs.student_gradesResult}</p></td>
                </tr>
                <tr>
                    <td>
                        <h:dataTable  value="#{gradesBean.points}" var="p"  cellpadding="0" cellspacing="0" styleClass="TableForGrades">
                            <h:column>
                                <span class="greyLinks">
                                    <h:commandLink   value="#{p.points.curriculum.discipline.name}">
                                         <f:setPropertyActionListener target="#{gradesBean.currentsFacade}" value="#{p}" />
                                         <f:ajax  render="@form"/>
                                   </h:commandLink>
                                </span>
                            </h:column>
                            <h:column>
                                <span><h:outputText converter="enumConverter" value="#{p.grade}"/></span>
                            </h:column>
                        </h:dataTable>
                </td>
                <td>
                <h:panelGroup id="gradeInfo" rendered="#{gradesBean.currentsFacade!=null}" >
                    <p class="GreenLinkToDisciplineOpen linkToTeachersProfile"><h:outputLink value="umk.xhtml?c=#{gradesBean.currentsFacade.points.curriculum.id}">#{gradesBean.currentsFacade.points.curriculum.discipline.name}</h:outputLink></p>
                    <table class="GradesDiskription">
                        <tr>
                            <td>#{msgs.student_gradesTableHeadTeacher}</td>
                            <td class="linkToTeachersProfile">
                                 <ui:repeat value="#{setToList.getList(gradesBean.currentsFacade.points.curriculum.teacherToGroups)}" var="t">    
                                            <a href="teacher.xhtml?id=#{t.teacher.id}"> #{t.teacher.fio}</a>
                                </ui:repeat>                                 
                            </td>
                        </tr>
                        <tr>
                            <td>#{msgs.student_gradesTableHeadTests}</td>
                            <td> 
                                <h:panelGroup rendered="#{(gradesBean.currentsFacade.test) ne null}">
                                    <span>#{gradesBean.currentsFacade.test}</span> <span class="lightGreyTestText">#{msgs.student_From} #{gradesBean.currentsFacade.testsMaxPoints}</span>
                                </h:panelGroup>
                                <h:panelGroup rendered="#{(gradesBean.currentsFacade.test) eq null}">
                                    <span class="lightGreyTestText"> #{gradesBean.currentsFacade.testsMaxPoints}</span>
                                </h:panelGroup>
                            </td>
                        </tr>
                        <tr>
                            <td>#{msgs.student_gradesTableHeadResit}</td>
                            <td>#{gradesBean.currentsFacade.reTest} </td>
                        </tr>
                        <tr>
                            <td>#{msgs.student_gradesTableHeadFinTests}</td>
                            <td>
                                <h:panelGroup rendered="#{(gradesBean.currentsFacade.concludingTest) ne null}">
                                    <span>#{gradesBean.currentsFacade.concludingTest}</span> <span class="lightGreyTestText">#{msgs.student_From} #{gradesBean.currentsFacade.concludingTestsMaxPoints}</span>
                                </h:panelGroup>
                                <h:panelGroup rendered="#{(gradesBean.currentsFacade.concludingTest) eq null}">
                                    <span class="lightGreyTestText"> #{gradesBean.currentsFacade.concludingTestsMaxPoints}</span>
                                </h:panelGroup>
                            </td>
                        </tr>
                        <tr>
                            <td>#{msgs.student_gradesTableHeadResit}</td>
                            <td>#{gradesBean.currentsFacade.concludingReTest}</td>
                        </tr>
                        <tr>
                            <td>#{msgs.student_gradesSamWorks}</td>
                            <td>#{gradesBean.currentsFacade.controlWorkPoints}</td>
                        </tr>
                        <tr>
                            <td>#{msgs.student_gradesControlWork}</td>
                            <td><h:outputText converter="enumConverter" value="#{gradesBean.currentsFacade.controlWorkValue}"/></td>
                        </tr>
                        <tr>
                            <td>#{msgs.student_gradesTableHeadSumm}</td>
                            <td>#{gradesBean.currentsFacade.points.sum}</td>
                        </tr>
                        <tr>
                            <td>#{msgs.student_gradesTableHeadFinal}</td>
                            <td><h:outputText converter="enumConverter" value="#{gradesBean.currentsFacade.grade}"/></td>
                        </tr>
                    </table>
                </h:panelGroup>
                </td>
                </tr>
            </table>
         </h:form>  
            </div>


    </ui:define>
</ui:composition>
