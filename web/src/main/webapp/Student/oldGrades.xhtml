<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    template="../resources/studentTemplate.xhtml"
    >
    <ui:define name="contentHeader">
        #{msgs.student_oldGradesHeader}
    </ui:define>
    <ui:define name="content">
        <div class="interfaceContent">
            <f:metadata>
             <f:viewParam name="s" value="#{oldGradesBean.semester}"/>
             <f:viewParam name="w" value="#{oldGradesBean.winter}"/>
         </f:metadata>
            <h:outputLink id="handle" value="?s=#{oldGradesBean.semester+(oldGradesBean.winter?1:-1)}&amp;w=#{!oldGradesBean.winter}">
            <h:outputText id="isWinter" value="#{oldGradesBean.winter?('зима'):('лето')}" style="color: #8BB5DF;font-weight: bold;font-size: 13pt;font-family: Arial; font-style: italic;text-decoration: underline;"/>
            </h:outputLink>
            <br/>
            <ui:repeat id="years" value="#{oldGradesBean.years}" var="y">
                <span style="margin-right: 10px;">
                <h:outputLink id="year" disabled="#{oldGradesBean.semester eq y[1]}"  value="?w=#{oldGradesBean.winter}&amp;s=#{y[1]}" style="color: #8BB5DF;">
                    <h:outputText  value="#{y[0]}"/>
                </h:outputLink>
               </span>
            </ui:repeat>

        <h:dataTable id="table" value="#{oldGradesBean.oldGrades}" var="p"
                     style="width: 100%;"
                     columnClasses="studentStandatrTableTd,studentStandatrTableTd,
                     studentStandatrTableTdLastTd studentStandatrTableExamin" cellpadding="0" cellspacing="0" styleClass="studentStandatrTable">
            <h:column>
                <f:facet name="header">
                    <h:outputText value="#{msgs.student_gradesTableHeadDisc}" />
                </f:facet>
                <span class="controlWorksDisciplineName" style="display: block;font-size: 8pt;font-weight: normal;padding-left: 8px;">#{p.key.key.discipline.name}</span>
            </h:column>
            <h:column>
                <f:facet name="header">
                    Преподаватель
                </f:facet>
                <span class="linkToTeachersProfile linkToTeachersProfileFromStudent"><h:outputLink value="teacher.xhtml?id=${p.key.value.id}">#{p.key.value.initials}</h:outputLink></span>
            </h:column>
            <h:column>
                <f:facet name="header">
                    <h:outputText value="#{msgs.student_gradesTableHeadFinal}" />
                </f:facet>
                <h:outputText converter="enumConverter" value="#{p.value.gradeCode}"/>
            </h:column>
        </h:dataTable>
        </div>
    </ui:define>
</ui:composition>
