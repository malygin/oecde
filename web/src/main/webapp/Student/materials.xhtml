<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:r="http://java.sun.com/jsp/jstl/core"
    template="../resources/studentTemplate.xhtml"
    xmlns:est="http://java.sun.com/jsf/composite/components/estimation"
    xmlns:tabs="http://java.sun.com/jsf/composite/components/tabs"
    xmlns:edu="http://java.sun.com/jsf/composite/components/education"
    >
    <ui:define name="content">
        <div class="StudentMainPageTitlesBorders" style="margin-left: 2%; width: 66%; float: left;">

            <div>
                <div class="mainStudentPageTitles  mainStudentPageTitlesSkyBlue">
                    <p class="floatLeft mainStudentPageTitles skyBlueText" style="width: 70%; padding: 0;">
                        #{msgs.student_eduMenuLearningCourses}
                    </p>
                    <f:metadata>
                        <f:viewParam name="s" value="#{materialsBean.semester}"/>
                    </f:metadata>
                    <div style="float: right;">
                        <est:changeSemester semester="#{materialsBean.semester}" />
                    </div>
                    <div class="floatDestroyer"/>
                </div>
                <div class="floatDestroyer"></div>
                <br/>

                <h:panelGroup  rendered="#{studentSessionBean.student.group.speciality.department.id ne '6351123478'}">

                <table class="leftMenuContainer">
                <tr>
                    <td>
                        <div>
                            <span class="linkToStudentsProfile studentPaddLeft" ><h:outputLink value="umkR.xhtml?id=5505">Принятие эффективных решений <b>(просмотреть курс)</b></h:outputLink><br/></span>

                            <div class="materialInfo">
                                <table style="margin: 10px; border: 4px solid red; padding: 3px;" >
                                    <tr>
                                        <td>#{msgs.student_gradesTableHeadTeacher}</td>
                                        <td class="linkToTeachersProfile">
                                     <a href="admin.xhtml?id=178784772"> Олег Савельзон</a>
                                                               
                                    </td>
                                    </tr>
                                    <tr>
                                        <td colspan="2">
                                            <br/>
                                            Второй этап процедуры доступен по адресу
                                            <a href="http://mass-decision.ru/">http://mass-decision.ru/</a>
                                            <br/> <br/>
                                       Если у вас вознкли вопросы - обратитесь на форум <a href="forum.xhtml?type=spr">"Вопросы по системе принятия решений"</a> </td>
                                        <br/>
                                    </tr>
                                   
                                </table>
                
                            </div>
                        </div>

                    </td>
                </tr>
            </table>
                </h:panelGroup>
                <h:dataTable value="#{materialsBean.studentsDisciplines}" var="m" styleClass="leftMenuContainer" style="width: 100%;">
                    <h:column>
                        <h:panelGroup rendered="#{ m.curriculum.umk.id != 5276}"> 
                        <br />
                        <div>
                            <span class="linkToStudentsProfile studentPaddLeft"><h:outputLink value="discipline.xhtml?c=#{m.curriculum.id}" style=" font-size: 11pt !important;">#{m.curriculum.umk.name}</h:outputLink><br/></span>

                            <div class="materialInfo">
                                <table style="margin: 10px;">
                                    <tr>
                                        <td>#{msgs.student_gradesTableHeadTeacher}</td>
                                        <td class="linkToTeachersProfile">
                                    <ui:repeat value="#{setToList.getList(m.curriculum.teacherToGroups)}" var="t"  >    
                                        <h:panelGroup rendered="#{t.group.id==studentSessionBean.student.group.id}"> <a href="teacher.xhtml?id=#{t.teacher.id}"> #{t.teacher.fio}</a></h:panelGroup>
                                    </ui:repeat>                                
                                    </td>
                                    </tr>
                                    <tr>
                                        <td>#{msgs.student_finishedTests}</td>
                                        <td><span> #{m.passedTests}</span> #{msgs.student_fromWord} #{m.testsCount} (<a href="discipline.xhtml?c=#{m.curriculum.id}#toTests">#{msgs.student_materialsGoToTest}</a>)</td>
                                    </tr>
                                    <tr>
                                        <td>Промежуточное тестирование</td>
                                        <td><span> #{m.reTestPoints==0?m.testPoints:m.reTestPoints}</span> #{msgs.student_gradesMarks} (<a href="testResults.xhtml">#{msgs.student_newsMore}</a>)</td>
                                    </tr>
                                    <tr>
                                        <td>Промежуточная аттестация</td>
                                        <td><span> #{m.activityPoints}</span> #{msgs.student_gradesMarks}  ( вес - #{m.curriculum.weightAtt} %)</td>
                                    </tr>
                                    <tr>
                                        <td>Научная и исследовательская деятельность по дисциплине</td>
                                        <td><span> #{m.personalCharPoints}</span> #{msgs.student_gradesMarks} ( вес - #{m.curriculum.weightPers} %)</td>
                                    </tr>
                                            <tr>
                                        <td>Самостоятельная аудиторная работа</td>
                                        <td><span> #{m.samAudWorkPoints}</span> #{msgs.student_gradesMarks} ( вес - #{m.curriculum.weightAud} %)</td>
                                    </tr>
                                            <tr>
                                        <td>Самостоятельная внеаудиторная работа</td>
                                        <td><span> #{m.samAudOutWorkPoints}</span> #{msgs.student_gradesMarks} ( вес - #{m.curriculum.weightOutAud} %)</td>
                                    </tr>
                                    <tr>
                                        <td>Тестовые задания</td>
                                        <td><span>#{m.concludingReTestPoints==0?m.concludingTestPoints:m.concludingReTestPoints}</span> #{msgs.student_gradesMarks}( вес - #{m.curriculum.weightTest} %) </td>
                                    </tr>
                                       <tr>
                                        <td>Всего: </td>
                                        <td><span>#{m.sum}</span> #{msgs.student_gradesMarks} </td>
                                    </tr>
                                </table>
                

                                <h:panelGroup rendered="#{m.testsCount ne 0}">
                                    
                                    <div class="progressBarMaterials floatLeft">
                                        <!-- ((m.testPoints+m.concludingTestPoints)*100/(m.testsCount*100) -->
                                       
                                        <h:panelGroup layout="block" rendered="#{(m.sum gt 0) and (m.sum le 50)}" style="height: 12px; width:#{m.sum}%;" styleClass="badResult"/>
                                        <h:panelGroup layout="block" rendered="#{(m.sum gt 50) and (m.sum le 90)}" style="height: 12px; width: #{m.sum}%;"  styleClass="goodResult"/>
                                        <h:panelGroup layout="block" rendered="#{(m.sum gt 90)}" style="height: 12px; width:#{m.sum}%;"  styleClass="greateResult"/>
                                    </div>
                                    
                                    <div style="float: right;">
                                       
                                        <h:panelGroup layout="block" rendered="#{(m.sum le 50)}" style="color: #FBB35D; margin-right: 50px; width: 20px;"> 
                                            <h:outputText value="#{m.sum}">
                                                <f:convertNumber maxFractionDigits="2"/>
                                            </h:outputText>%;
                                        </h:panelGroup>
                                       
                                        <h:panelGroup layout="block" rendered="#{(m.sum gt 50) and (m.sum le 90)}" style="color: #0981bd; margin-right: 50px; width: 20px;">
                                             <h:outputText value="#{m.sum}">
                                                <f:convertNumber maxFractionDigits="2" />
                                            </h:outputText>%;
                                         </h:panelGroup>
                                       
                                        <h:panelGroup layout="block" rendered="#{(m.sum gt 90)}" style="color: #5bbf5d; margin-right: 50px;  width: 20px;">
                                            <h:outputText value="#{m.sum}">
                                                <f:convertNumber maxFractionDigits="2"/>
                                            </h:outputText>%;
                                        </h:panelGroup>
                                    </div>
                                    
                                    
                                </h:panelGroup>
                            </div>
                            <br />
                        </div>
                       </h:panelGroup>
                    </h:column>
                </h:dataTable>

            </div>
        </div>


        <div class="StudentMainPageTitlesBorders" style="width: 28%; margin-left: 70%">

            <div class="interfaceContentForMyMarks">
                <div class="mainStudentPageTitles  mainStudentPageTitlesSkyBlue">
                    #{msgs.student_marksHelp}
                </div>
            </div>
            <div class="textForPodskazka">
                <tabs:singleTab alias="STUDENT_MATERIALS"/>
            </div>
        </div>


            <div style="width: 28%; margin-left: 70%" class="StudentMainPageTitlesBorders">
            <edu:calendareInfo />

        </div>
    </ui:define>
</ui:composition>
