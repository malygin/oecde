<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:r="http://java.sun.com/jsp/jstl/core"
    template="../resources/studentTemplate.xhtml"
    xmlns:est="http://java.sun.com/jsf/composite/components/estimation"
    xmlns:tabs="http://java.sun.com/jsf/composite/components/tabs"
    xmlns:edu="http://java.sun.com/jsf/composite/components/education"
    >
    <ui:define name="content">
        <div class="StudentMainPageTitlesBorders" style="margin-left: 2%; width: 66%; float: left;">

            <div>
                <div class="mainStudentPageTitles  mainStudentPageTitlesSkyBlue">
                    <p class="floatLeft mainStudentPageTitles skyBlueText" style="width: 70%; padding: 0;">
                        Мои изучаемые материалы
                    </p>
                    <f:metadata>
                        <f:viewParam name="s" value="#{materialsBean.semester}"/>
                    </f:metadata>
                    <div style="float: right;">
                        <est:changeSemester semester="#{materialsBean.semester}" />
                    </div>
                    <div class="floatDestroyer"/>
                </div>
                <div class="floatDestroyer"></div>

                <h:dataTable value="#{materialsBean.studentsDisciplines}" var="m" styleClass="leftMenuContainer" style="width: 100%;">
                    <h:column>
                        <br />
                        <div>
                            <span class="linkToStudentsProfile studentPaddLeft"><h:outputLink value="discipline.xhtml?c=#{m.curriculum.id}" style=" font-size: 11pt !important;">#{m.curriculum.umk.name}</h:outputLink><br/></span>

                            <div class="materialInfo">
                                <table style="margin: 10px;">
                                    <tr>
                                        <td>Преподаватель</td>
                                        <td class="linkToTeachersProfile">
                                    <ui:repeat value="#{setToList.getList(m.curriculum.teacherToGroups)}" var="t">    
                                        <a href="teacher.xhtml?id=#{t.teacher.id}"> #{t.teacher.fio}</a>
                                    </ui:repeat>                                
                                    </td>
                                    </tr>
                                    <tr>
                                        <td>#{msgs.student_finishedTests}</td>
                                        <td><span> #{m.passedTests}</span> #{msgs.student_fromWord} #{m.testsCount} (<a href="discipline.xhtml?c=#{m.curriculum.id}#toTests">перейти к тестам</a>)</td>
                                    </tr>
                                    <tr>
                                        <td>#{msgs.student_testResults}</td>
                                        <td><span> #{m.reTestPoints==0?m.testPoints:m.reTestPoints}</span> баллов (<a href="testResults.xhtml">подробнее</a>)</td>
                                    </tr>
                                    <tr>
                                        <td>#{msgs.student_mainTest} </td>
                                        <td><span>#{m.concludingReTestPoints==0?m.concludingTestPoints:m.concludingReTestPoints}</span> баллов </td>
                                    </tr>
                                </table>
                

                                <h:panelGroup rendered="#{m.testsCount ne 0}">
                                    
                                    <div class="progressBarMaterials floatLeft">
                                        <h:panelGroup layout="block" rendered="#{((m.testPoints+m.concludingTestPoints)*100/(m.testsCount*100) gt 0) and ((m.testPoints+m.concludingTestPoints)*100/(m.testsCount*100) le 50)}" style="background: #FBB35D; height: 12px; width: #{(m.testPoints+m.concludingTestPoints)*100/(m.testsCount*100)}%;"/>
                                        <h:panelGroup layout="block" rendered="#{((m.testPoints+m.concludingTestPoints)*100/(m.testsCount*100) gt 50) and ((m.testPoints+m.concludingTestPoints)*100/(m.testsCount*100) le 90)}" style="background: #0981bd; height: 12px; width: #{(m.testPoints+m.concludingTestPoints)*100/(m.testsCount*100)}%;"/>
                                        <h:panelGroup layout="block" rendered="#{(m.testPoints+m.concludingTestPoints)*100/(m.testsCount*100) gt 90}" style="background: #5bbf5d; height: 12px; width: #{(m.testPoints+m.concludingTestPoints)*100/(m.testsCount*100)}%;"/>
                                    </div>
                                    
                                    <div style="float: right;">
                                        <h:panelGroup layout="block" rendered="#{(m.testPoints+m.concludingTestPoints)*100/(m.testsCount*100) le 50}" style="color: #FBB35D; margin-right: 50px; width: 20px;"> 
                                            <h:outputText value="#{(m.testPoints+m.concludingTestPoints)*100/(m.testsCount*100)}">
                                                <f:convertNumber maxFractionDigits="2"/>
                                            </h:outputText>%;
                                        </h:panelGroup>
                                       
                                        <h:panelGroup layout="block" rendered="#{((m.testPoints+m.concludingTestPoints)*100/(m.testsCount*100) gt 50) and ((m.testPoints+m.concludingTestPoints)*100/(m.testsCount*100) le 90)}" style="color: #0981bd; margin-right: 50px; width: 20px;">
                                             <h:outputText value="#{(m.testPoints+m.concludingTestPoints)*100/(m.testsCount*100)}">
                                                <f:convertNumber maxFractionDigits="2"/>
                                            </h:outputText>%;
                                         </h:panelGroup>
                                       
                                        <h:panelGroup layout="block" rendered="#{(m.testPoints+m.concludingTestPoints)*100/(m.testsCount*100) gt 90}" style="color: #5bbf5d; margin-right: 50px;  width: 20px;">
                                            <h:outputText value="#{(m.testPoints+m.concludingTestPoints)*100/(m.testsCount*100)}">
                                                <f:convertNumber maxFractionDigits="2"/>
                                            </h:outputText>%;
                                        </h:panelGroup>
                                    </div>
                                    
                                    
                                </h:panelGroup>
                            </div>
                            <br />
                        </div>
                    </h:column>
                </h:dataTable>

            </div>
        </div>


        <div class="StudentMainPageTitlesBorders" style="width: 28%; margin-left: 70%">

            <div class="interfaceContentForMyMarks">
                <div class="mainStudentPageTitles  mainStudentPageTitlesSkyBlue">
                    Подсказка
                </div>
            </div>
            <div class="textForPodskazka">
                <tabs:singleTab alias="STUDENT_MATERIALS"/>
            </div>
        </div>


            <div style="width: 28%; margin-left: 70%" class="StudentMainPageTitlesBorders">
            <edu:calendareInfo />

        </div>
    </ui:define>
</ui:composition>
