<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:r="http://java.sun.com/jsp/jstl/core"
    template="../resources/studentTemplate.xhtml"
    >
    <ui:define name="contentHeader">
        #{disciplineBean.discipline.umk.name}
    </ui:define>
    <ui:define name="content">
        <div class="interfaceContent">
            <f:metadata>
                <f:viewParam name="c" value="#{disciplineBean.curriculumId}"/>
            </f:metadata>
            <h:outputText rendered="#{disciplineBean.accessDenied}" value="Не найден или не доступен" />
            <r:forEach items="#{disciplineBean.discipline.umk.modules}" var="m">
                <div class="studentInterfaceStandartList">
                    <div class="controlWorksDisciplineName">${m.name}</div>
                    <r:forEach items="${m.resources}" var="r" varStatus="i">
                        <div class="navigationLinks" style="margin-left: 20px;">
                            <a href="exbook.xhtml?cId=${disciplineBean.curriculumId}&amp;mId=${m.id}&amp;tId=${r.id}">${r.title}</a>
                        </div>
                    </r:forEach>
                </div>
            </r:forEach>
            <br/>
            <div>
                Тесты:
            </div>
            <r:forEach items="#{disciplineBean.tests}" var="t">
                <div class="studentInterfaceStandartList">
                    <r:set var="work" value="#{t[1]}"/>
                    <r:set var="test" value="#{work.work}"/>
                    
                    <r:choose>
                        <r:when test="#{t[0]=='true'}">
                            <div class="controlWorksDisciplineNameLink"><h:outputLink value="test.xhtml?c=#{disciplineBean.discipline.id}&amp;id=#{test.id}" >#{test.title}</h:outputLink></div>
                        </r:when>
                        <r:otherwise>
                            <div class="controlWorksDisciplineName"><h:outputText value="#{test.title}"/></div>
                        </r:otherwise>
                    </r:choose>
                    <div style="margin-left: 20px; margin-top: 5px;">
                        <h:outputText style="color: red" value="#{t[2]}  ||  #{t[3]}  ||  #{t[4]}"/><br/>
                        попыток: #{work.estimateAttemptsUsedNumber} из #{test.estimateAttemptsNumber}<br/>
                        пробных: #{work.trialAttemptsUsedNumber} из #{test.trialNumber}<br/>
                        переэкзаменовка: #{work.reExameAttemptsUsedNumber}<br/>
                        <h:outputText rendered="#{test.openDate ne null and test.closeDate ne null}" value="доступен с #{test.openDate} по #{test.closeDate}"/><br/>
                        количество вопросов: #{test.quantity}<br/>
                        предоставленное время: #{test.duration}<br/>
                        Результаты тестирования: #{work.pointsForWork}<br/>
                    </div>
                </div>
            </r:forEach>
        </div>
    </ui:define>
</ui:composition>