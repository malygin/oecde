<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:r="http://java.sun.com/jsp/jstl/core"
    template="../resources/studentTemplate.xhtml"
    >
    <ui:define name="contentHeader">
        #{disciplineBean.discipline.umk.name}
    </ui:define>
    <ui:define name="content">
        
        <div class="interfaceContent">
            <f:metadata>
                <f:viewParam name="c" value="#{disciplineBean.curriculumId}"/>
            </f:metadata>
            <h:outputText rendered="#{disciplineBean.accessDenied}" value="Не найден или не доступен" />
            <r:forEach items="#{disciplineBean.discipline.umk.modules}" var="m">
                <div class="studentInterfaceStandartList">
                    <div class="controlWorksDisciplineName">${m.name}</div>
                    <r:forEach items="${m.resources}" var="r" varStatus="i">
                        <div class="navigationLinks" style="margin-left: 20px;">
                            <a href="exbook.xhtml?cId=${disciplineBean.curriculumId}&amp;mId=${m.id}&amp;tId=${r.id}" style="text-decoration: none;">${r.title}</a>
                        </div>
                    </r:forEach>
                </div>
            </r:forEach>
            <br/>
            <div style="color: #27587F;font-family: Arial;font-size:12pt;margin-left: 10px;font-weight: bolder;">
                Тесты:
            </div>
            <r:forEach items="#{disciplineBean.tests}" var="t">
                <div class="studentInterfaceStandartList">
                    <r:set var="work" value="#{t[1]}"/>
                    <r:set var="test" value="#{work.work}"/>
                    
                    <r:choose>
                        <r:when test="#{t[0]=='true'}">
                            <div class="controlWorksDisciplineNameLink"><h:outputLink value="test.xhtml?c=#{disciplineBean.discipline.id}&amp;id=#{test.id}" >#{test.title}</h:outputLink></div>
                        </r:when>
                        <r:otherwise>
                            <div class="controlWorksDisciplineName">
                                 <h:outputText rendered="#{t[3]==null||t[4]==null}" style="color: grey;" value="#{test.title}"/>
                            </div>
                        </r:otherwise>
                    </r:choose>
                    <div style="margin-left: 20px; margin-top: 5px;">
                        <h:outputText rendered="#{t[2]!=null}" style="color: #EF596D; display: block;" value="#{t[2]}"/>
                        <h:outputText rendered="#{t[3]!=null}" style="color: #EF596D; display: block;" value="#{t[3]}"/>
                        <h:outputText rendered="#{t[4]!=null}" style="color: #EF596D; display: block;" value="#{t[4]}"/>
                        попыток: <span>#{work.estimateAttemptsUsedNumber} из #{test.estimateAttemptsNumber}</span><br/>
                        пробных: <span>#{work.trialAttemptsUsedNumber} из #{test.trialNumber}</span><br/>
                        переэкзаменовка: <span>#{work.reExameAttemptsUsedNumber}</span><br/>
                        <h:outputText rendered="#{test.openDate ne null and test.closeDate ne null}" value="доступен с #{test.openDate} по #{test.closeDate}"/><br/>
                        количество вопросов:  <span>#{test.quantity}</span><br/>
                        предоставленное время:  <span>#{test.duration}</span><br/>
                        Результаты тестирования: <span>#{work.pointsForWork}</span><br/>
                    </div>
                </div>
            </r:forEach>
        </div>
    </ui:define>
</ui:composition>
