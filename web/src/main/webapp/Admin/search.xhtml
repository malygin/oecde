<ui:composition
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ut="http://java.sun.com/jsf/composite/components/util"
    template="../resources/adminTemplate.xhtml"
    >
    <ui:define name="content">
        <div class="interfaceContent">
        <h:form>
            <table><tr style="display: block; margin-top: 10px;"><td>
                <h:inputText value="#{searchBean.keyWord}">
                    <f:ajax execute="@form" event="keypress" render=":table" listener="#{searchBean.doSearch}"/>
                </h:inputText></td>
            <td><h:selectOneMenu id="type" value="#{searchBean.type}">
                     <f:ajax execute="@form" render=":table" listener="#{searchBean.doSearch}"/>
                     <f:selectItems value="#{searchBean.types}" />
                 </h:selectOneMenu></td><td>
                 <h:commandButton value="ОК" styleClass="studentButton" style="width: 70px; margin-top: 0;margin-left: 10px; text-align: center !important;">
                     <f:ajax execute="@form" render=":table" listener="#{searchBean.doSearch}"/>
                 </h:commandButton>
            </td></tr></table>
        </h:form>
        <h:dataTable value="#{searchBean.items}" var="i" id="table">
            <h:column>
                <h:panelGroup rendered="#{searchBean.type eq 'teacher' or searchBean.type eq 'student'}">
                    <div class="studentInterfaceStandartList">
                   <ut:userListItem type="#{searchBean.type}" u="#{i}"/>
                     <div class="floatDestroyer"/>
                   </div>
                </h:panelGroup>
                <h:panelGroup rendered="#{searchBean.type eq 'umk'}">
                    <h:form>
                        <h:outputLink value="umk.xhtml?id=#{i.id}">#{i.name}</h:outputLink><br/>
                        <h:commandLink value="курс отредактирован">
                            <f:attribute name="umk" value="#{i}"/>
                            <f:attribute name="event" value="UMK_CREATE"/>
                            <f:ajax execute="@this" listener="#{umkEventsBean.logEvent}"/>
                        </h:commandLink> |
                        <h:commandLink value="курс удалён">
                            <f:attribute name="umk" value="#{i}"/>
                            <f:attribute name="event" value="UMK_DELETE"/>
                            <f:ajax execute="@this" listener="#{umkEventsBean.logEvent}"/>
                        </h:commandLink> |
                        <h:commandLink value="курс добавлен">
                            <f:attribute name="umk" value="#{i}"/>
                            <f:attribute name="event" value="UMK_EDIT"/>
                            <f:ajax execute="@this" listener="#{umkEventsBean.logEvent}"/>
                        </h:commandLink><br/>
                    </h:form>
                </h:panelGroup>
                <h:panelGroup rendered="#{searchBean.type eq 'group'}">
                     <h:outputLink value="group.xhtml?id=#{i.id}">#{i.name}</h:outputLink><br/>
                    (<h:outputText value="#{i.faculty}"/>,
                    <h:outputText value="#{i.speciality.name}"/>)
                </h:panelGroup>
            </h:column>
        </h:dataTable>        
        </div>
    </ui:define>
</ui:composition>