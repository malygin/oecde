<?xml version="1.0" encoding="UTF-8"?>
<ui:composition
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:h="http://java.sun.com/jsf/html"
     template="../resources/adminTemplate.xhtml"
     xmlns:est="http://java.sun.com/jsf/composite/components/estimation"
     xmlns:ut="http://java.sun.com/jsf/composite/components/util">
    <ui:define name="online">
        #{studentViewBean.setType('STUDENT')}
        <h:outputText rendered="#{studentViewBean.user.online}" value="On-line"/>
    </ui:define>
    <ui:define name="content">
        <f:metadata>
            <f:viewParam name="id" value="#{studentViewBean.id}"/>
            <f:viewParam name="s" value="#{studentViewBean.semester}"/>
            <f:viewParam name="r" value="#{testResultsBean.reExame}"/>
        </f:metadata>
        <!--<ui:include src="../resources/includes/student.xhtml"/>-->
        
        
        <div class="StudentMainPageTitlesBorders">

            <div>
                <div class="mainStudentPageTitles  mainStudentPageTitlesBlue">
                    #{msgs.admin_userInfoStudent}
                    <f:metadata>
                        <f:viewParam name="s" value="#{materialsBean.semester}"/>
                    </f:metadata>
                    <div style="float: right;">
                        <est:changeSemester semester="#{studentViewBean.semester}" link="id=#{studentViewBean.id}"/>
                    </div>
                    <div class="floatDestroyer"/>
                </div>
                <div class="floatDestroyer">
                </div>
           
                    
         <div class="groupInfo">
                <est:infoAboutStudent pageName="tests"/>
            </div>          
                 
<h:form id="form">
    <span class="controlWorksDisciplineNameLink">
    <h:commandLink value="#{msgs.student_eduMenuReexamination}">
        <f:attribute name="reExame" value="#{!testResultsBean.reExame}"/>
        <f:ajax render="form" listener="#{studentViewBean.reExameSwitch}"/>
    </h:commandLink>
    </span><br/>

    <!--<div style="margin: 10px; margin-top: 0;">
                <h:dataTable value="#{groupTestResults.groupTestResults}" var="w" styleClass="leftMenuContainer" style="width: 100%;"
                             cellpadding="0" cellspacing="0">
                    <h:column>
                        <div>
                            <br/>
                            <span class="linkToStudentsProfile"><h:outputLink value="student.xhtml?id=#{w.key.id}&amp;s=#{groupTestResults.semester}">#{w.key.fio}</h:outputLink></span>
                            <br/>
                            <edu:oneStudentTestsForTeacher tests="#{w.value}" studentId="#{w.key.id}"/>
                        </div>
                    </h:column>
                </h:dataTable>
            </div>-->
    
    
    <h:dataTable style="width: 100%;" value="#{testResultsBean.attempts}" cellpadding="0" cellspacing="0"
                 columnClasses="studentStandatrTableTd,
                 studentStandatrTableTd,
                 studentStandatrTableSubtableTd,
                 studentStandatrTableTd,
                 studentStandatrTableTdLastTd" styleClass="studentStandatrTable"  var="r">
        <h:column>
            <f:facet name="header">
                <h:outputText value="#{msgs.student_testResultName}" />
            </f:facet>
            <span class="controlWorksDisciplineName" style="font-size: 8pt;">#{r.work.title}</span>
        </h:column>
        <h:column>
            <f:facet name="header">
                <h:outputText value="#{msgs.student_testResultAttempt}" />
            </f:facet>
            #{testResultsBean.reExame?r.reExameAttemptsUsedNumber:r.estimateAttemptsUsedNumber} #{msgs.student_fromWord}
            #{testResultsBean.reExame?
               (r.work.type eq testConstantsServise.concludingType?testResultsBean.concludingAttemtpsCount:testResultsBean.regularAttemtpsCount)
            :r.work.quantity}
        </h:column>

        <h:column>
            <h:dataTable value="#{r.results}"
                         headerClass="studentTabInStandartTableTh"
                         columnClasses="studentTabInStandartTableLeftTd, studentTabInStandartTableRightTd"
                         styleClass="studentTabInStandartTable" cellpadding="0" cellspacing="0" var="a" id="rowId">
                <h:column>
                    <f:facet name="header">
                        <div class="studentTabInStandartTableThContainer">
                            <h:outputText value="#{msgs.student_testResultCorrectAnswers}" />
                        </div>
                    </f:facet>
                    #{a.rightAnswers} #{msgs.student_fromWord} #{r.work.quantity}
               </h:column>
               <h:column>
                    <f:facet name="header">
                        <div class="studentTabInStandartTableThContainer" style="border: 0px;">
                            <h:outputText value="#{msgs.student_testResultDate}" />
                        </div>
                    </f:facet>
                    #{a.date}
                </h:column>
            </h:dataTable>
        </h:column>

        <h:column>
            <f:facet name="header">
                <h:outputText value="#{msgs.student_testResultResult}" />
            </f:facet>
            #{r.pointsForWork}
        </h:column>
        <h:column>
            <f:facet name="header">
                <h:outputText value="#{msgs.student_testResultEstimationMethod}" />
            </f:facet>
            <h:outputText converter="enumConverter" value="#{r.work.estimation}" />
        </h:column>
    </h:dataTable>
</h:form>
</div>
</div>
        
        
    </ui:define>
</ui:composition>
